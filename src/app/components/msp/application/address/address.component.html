<form #formRef="ngForm" novalidate >
    <h1 [innerHTML]="lang('./en/index.js').pageTitle"></h1>
    <p class="help-block" [innerHTML]="lang('./en/index.js').helpBlock"></p>
    
    <common-page-section layout='double'>
        <h2 class="border-bottom">Address</h2>
        <!--common-country name="country_{{objectId}}"
                    label="Country"
                    [countryList]="countryList"
                    [ngModel]="mspApplication?.residentialAddress.country"
                    (ngModelChange)="handleAddressUpdate($event)"
                    [required]="true"
                    [disabled]="false" ></common-country> -->

        <common-address #address [disabled]="!editIdentityInfo"
                        [address]="mspApplication?.residentialAddress"
                        (addressChange)="handleAddressUpdate($event)"
                        [defaultCountry]="defaultCountry"
                        [countryList]="countryList"
                        [defaultProvince]="defaultProvince"
                        [provinceList]="provinceList"
                        [isRequired]="true">
        </common-address>
        <div class="custom-control custom-checkbox">
            <input type="checkbox"
                class="custom-control-input"
                id="isMailingAddress"
                [checked]="mspApplication.mailingSameAsResidentialAddress"
                (click)="toggleCheckBox()" />
            <label class="custom-control-label" for="isMailingAddress">
            This is my mailing address.
            </label>
        </div>
        <aside>
            <h2 class="border-bottom">Mailing Address</h2>
            <div *ngIf="!mspApplication.mailingSameAsResidentialAddress; else NoMailingAddress">
            <common-address [address]="mspApplication?.mailingAddress"
                            (addressChange)="handleAddressUpdate($event)"
                            [defaultCountry]="defaultCountry"
                            [countryList]="countryList"
                            [defaultProvince]="defaultProvince"
                            [provinceList]="provinceList"
                            [isRequired]="true"></common-address>
            </div>
        </aside>
    </common-page-section>
    <ng-template #NoMailingAddress>
        <div class="mail-address-container">
            <button type="button" class="btn btn-lg btn-warning mx-auto d-block" (click)="toggleCheckBox()">My mailing address
            is different.</button>
        </div>
    </ng-template>
    
    
    <!-- <common-address  #address
                         [(address)]="mspApplication.residentialAddress"
                         (addressChange)="handleAddressUpdate($event)"
                         [defaultProvince]="defaultProvince"
                         [defaultCountry]="defaultCountry"
                         [isRequired]="true">

    </common-address>

    <common-checkbox  [label]="lang('./en/index.js').sameMailingAddress" [data]="mspApplication.mailingSameAsResidentialAddress"></common-checkbox><br/>
    
    <common-checkbox  [label]="lang('./en/index.js').provideDifferentMailingAddress" (dataChange)="toggleMailingSameAsResidentialAddress($event)" [data]="!mspApplication.mailingSameAsResidentialAddress"></common-checkbox>
       

    <div *ngIf="!this.mspApplication.mailingSameAsResidentialAddress">
            <h2>Mailing Address</h2>
    
            <common-address  #mailingAddress
                    [(address)]="mspApplication.mailingAddress"
                    (addressChange)="handleAddressUpdate($event)"
                    [defaultProvince]="defaultProvince"
                    [defaultCountry]="defaultCountry"
                    [isRequired]="true">

            </common-address>    

            </div>
    
    <!--<msp-address #address
                 [residentialAddress]="mspApplication.residentialAddress"
                 [mailingAddress]="mspApplication.mailingAddress"
                 [mailingSameAsResidentialAddress]="mspApplication.mailingSameAsResidentialAddress"
                 (mailingSameAsResidentialAddressChange)="toggleMailingSameAsResidentialAddress($event)"
                 (onChange)="handleAddressUpdate($event)">
    </msp-address> -->
    <div class="row">
        <div class="form-group col-md-5">
            <common-phone-number #phone [label]="'Phone Number'"
                       [phoneNumber]="mspApplication.phoneNumber"
                       (onChange)="handlePhoneNumberChange($event)"></common-phone-number>
        </div>
    </div>
    <hr>


    <common-form-action-bar [submitLabel]="lang('./en/index.js').continueButton"
        [canContinue]="canContinue()"
        (btnClick)="continue()">
    </common-form-action-bar>
   <!-- <button
            class="btn btn-primary" type="submit"
            [innerHTML]="lang('./en/index.js').continueButton"
            [disabled]="!canContinue()">
    </button>
    <msp-cancel></msp-cancel> -->


</form>
