<form #formRef="ngForm" novalidate >
    <common-page-framework layout="blank">
        <h1> Contact Information </h1>
        <p class="help-block">
            Please provide the Account Holder's contact information.
        </p>
        <common-page-section layout='double'>
            <h2> Residential Address</h2>
            <p class="border-bottom"> Enter your residential address - that's the address your currently reside at in B.C.</p>
            <!-- <common-address #address
                            [address]="mspApplication?.residentialAddress"
                            (addressChange)="handleAddressUpdate($event)"
                            [isRequired]="true">
            </common-address> -->
            <common-address [address]="mspApplication?.residentialAddress"
                            (addressChange)="handleAddressUpdate($event)"
                            [isRequired]="true"
                            [allowExtralines]='true'
                            [disableGeocoder]='true'>
            </common-address>
            <div class="custom-control custom-checkbox">
                <input type="checkbox"
                    class="custom-control-input"
                    id="isMailingAddress"
                    [checked]="mspApplication.mailingSameAsResidentialAddress"
                    (click)="toggleCheckBox()" />
                <label class="custom-control-label" for="isMailingAddress">
                This is my mailing address.
                </label>
            </div>
            <aside>
                <h2> Mailing Address </h2>
                <p class="border-bottom"> Enter your mailing address - if it's different </p>
                <div *ngIf="!mspApplication.mailingSameAsResidentialAddress; else NoMailingAddress">
                    <!-- <common-address [address]="mspApplication?.mailingAddress"
                                (addressChange)="handleAddressUpdate($event)"
                                [defaultCountry]="defaultCountry"
                                [countryList]="countryList"
                                [defaultProvince]="defaultProvince"
                                [provinceList]="provinceList"
                                [isRequired]="true"></common-address> -->
                    <common-address [address]="mspApplication?.residentialAddress"
                                    (addressChange)="handleAddressUpdate($event)"
                                    [isRequired]="true"
                                    [allowExtralines]='true'
                                    [disableGeocoder]='true'>
                    </common-address>
                </div>
            </aside>
        </common-page-section>
        <h2 class="border-bottom"> Phone </h2>
        <div class="row">
            <div class="form-group col-3">
                <common-phone-number name="phone_number" 
                    [label]="'Phone Number (optional)'" 
                    [phoneNumber]="mspApplication.phoneNumber" 
                    (onChange)="handlePhoneNumberChange($event)">
                </common-phone-number>
            </div>
            <div class="col-9">           
                <common-page-section layout="tips">
                    <aside>
                        <b>Tip</b>
                        <p>
                            Please provide a phone number so you may be contacted in case of any issues with your application.
                        </p>
                    </aside>
                </common-page-section>
            </div>
        </div>
    </common-page-framework>
    <common-form-action-bar [canContinue]="canContinue()"
                            (btnClick)="continue()"></common-form-action-bar>

</form>

<ng-template #NoMailingAddress>
    <div class="mail-address-container">
        <button type="button" class="btn btn-lg btn-warning mx-auto d-block" (click)="toggleCheckBox()">My mailing address
        is different.</button>
    </div>
</ng-template>