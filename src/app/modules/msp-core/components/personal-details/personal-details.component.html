<msp-services-card-disclaimer-modal #mspServicesCardModal
                                    ></msp-services-card-disclaimer-modal>

    <form #formRef='ngForm' novalidate>
            <div class="row">
                <div class="col-sm-8">
                    <h2>{{lang('./en/index.js').sectionTitle[person.relationship]}}</h2>
                </div>
            </div>
        
            <!-- Remove Spouse and Child Button -->
        
            <div class="col-lg-12" *ngIf="!embedded">
                    
                    <div *ngIf="person.relationship !== 0" style="margin-top: 18px">
                        <div *ngIf="person.relationship === 1">
                        <i class="fa fa-times mr-3 mb-3 pointer float-right text-danger" aria-hidden="true" (click)="removeSpouse()"></i>
                        </div>
        
                        <div *ngIf="person.relationship === 2">
                            <i class="fa fa-times mr-3 mb-3 pointer float-right text-danger" aria-hidden="true" (click)="removeChild()"></i>
                        </div>
                    </div>
            </div>
            
            <div class="row" >
                <div class="col-lg-4" role="dialog" [attr.aria-label]="statusLabel()">
                    <msp-citizen-status id="primary" [label]="statusLabel()" [items]="StatusInCanada"
                        (change)="setStatus($event, person)">
                    </msp-citizen-status>
                
                    <div  *ngFor="let activity of activities">
        
                        <common-radio [display]="" [value]="person.currentActivity"  
                            [radioLabels]="[{ value: activity, label: langActivities('./en/index.js')[activity]}]" 
                            (statusChange)="setActivity(activity)">
                        </common-radio>
                        
        <!--
                        <input class='form-check-input' type="radio" name="activity-{{id}}" id="a{{activity}}-{{id}}"
                            (click)="setActivity(activity)" [checked]="activity === person.currentActivity">
                        <label class='form-check-label shade' for="a{{activity}}-{{id}}">
                            {{langActivities('./en/index.js')[activity]}}
                        </label>  -->
                    </div>
                </div>
            <!-- </div> -->
        </div> 


        <div class="col-lg-4" *ngIf="person.status != null && person.currentActivity != null" role="alert" aria-live="assertive">
            <h3><i class="fa fa-id-card-o" aria-hidden="true"></i> {{lang('./en/index.js').documentInstructionLabel[this.person.relationship]}}</h3>
            <p [innerHtml]="lang('./en/index.js').documentInstructionsIntro"></p>
            <ul>
                <li *ngFor="let document of documents">
                    {{langDocuments[document]}}
                    <a role="button" aria-haspopup="true" href="javascript:void(0)" (click)="viewIdReqModal(document)" tabindex="0">
                    Open sample</a>
                </li>
            </ul>
            <p [innerHtml]="lang('./en/index.js').documentInstructionsMarriage"></p>
            <ul>
                <li *ngFor="let document of nameChangeDocuments">
                    {{langDocuments[document]}}
                    <a role="button" aria-haspopup="true" href="javascript:void(0)" (click)="viewIdReqModal(document)" tabindex="0">
                            Open sample</a>
                </li>
            </ul>
            <msp-id-req-modal #idReqModal></msp-id-req-modal>
        </div>
        <div class="col-lg-4" *ngIf="person.status != null && person.currentActivity != null">

            <h3 [innerHtml]="lang('./en/index.js').documentUploadLabel[this.person.relationship]"></h3>
            <div [innerHtml]="lang('./en/index.js').documentInstructionsNote"></div>

            <common-file-uploader #fileUploader
                [images]="person.documents.images" [id]='id'>
                <span id="uploadInstruction" #uploadInstruction tabindex="0">Please upload required ID documents</span>
            </common-file-uploader>

            <msp-image-error-modal #imageErrorModal></msp-image-error-modal>
        </div>
    
<div *ngIf="hasValidCurrentActivity">

    <div *ngIf="person.documents.images.length > 0">
        <h3 [innerHtml]="lang('./en/index.js').applicationPersonalInfo[person.relationship]"></h3>
        <p class="help-block" [innerHtml]="lang('./en/index.js').nameHelpBlock[this.person.relationship]"></p>
        <msp-full-name [data]="person" (dataChange)="onChange.emit($event)" ></msp-full-name>
       
        
        <div class="row">
            <div class="col-md-4">
                  
                <common-radio [value]="person.gender" 
                              label='Gender' 
                              [radioLabels]='[{"label": "Male", "value": "M"},{ "label": "Female", "value": "F"}]' 
                              (statusChange)="setGenderVal($event)"
                              [showError]="showError">
                </common-radio>   
       <!--         <common-gender
                    
                    [person]="person"
                    (onChange)="onChange.emit($event)"
                    [showError]="showError"
                ></common-gender>   -->

            <!-- <msp-gender
                  #gender
                  [person]="person"
                  (onChange) = "onChange.emit($event)" 
                  [showError] = "showError"
                  ></msp-gender> -->
            </div>
            <div class="col-md-4">
                <msp-birthdate
                  #birthDate
                  [person]="person" 
                  (onChange) = "onChange.emit($event)"
                  [showError] = "showError">
                </msp-birthdate>
            </div>
        </div>
        <div class="row" 
          *ngIf="person.status === StatusInCanada.CitizenAdult &&
            person.currentActivity === Activities.LivingInBCWithoutMSP" style="margin-bottom: 5px">
            <div class="col-md-12">
              <div class="form-group"
                [ngClass]="{'msp-has-error': showError && (person.livedInBCSinceBirth !== true && person.livedInBCSinceBirth !== false)}"
                   role="dialog" [attr.aria-labelledby]="'livedInBCSinceBirth' + objectId">
                  <label [attr.id]="'livedInBCSinceBirth' + objectId" [innerHtml]="lang('./en/index.js').livedInBCSinceBirth[this.person.relationship]"></label>
                  <div class="btn-group" role="group">
                      <button *ngFor='let answer of [{"value": true, "label": "Yes"}, {"value": false, "label": "No"}]'
                              [class.msp-btn-radio]="person.livedInBCSinceBirth === answer.value"
                              (click)="setLivedInBCSinceBirth(answer.value)"
                              type="button" class="btn btn-default">{{answer.label}}
                      </button>
                  </div>
              </div>
            </div>
        </div>

      <div class="row" *ngIf="person.documents.images.length > 0">
            <div class="col-lg-4" *ngIf="person.currentActivity == Activities.MovingFromCountry || person.status == StatusInCanada.TemporaryResident">
              <common-country name='msp_country_1'
                  [label]="movedFromCountryLabel"
                  [ngModel]="person.movedFromProvinceOrCountry" 
                  (ngModelChange)="person.movedFromProvinceOrCountry = $event; onChange.emit($event)">
              </common-country>
            </div>
            <div class="col-lg-4" *ngIf="person.currentActivity === Activities.MovingFromProvince">
                <common-province name="msp_province_1"
                            [label]="movedFromProvinceLabel[this.person.relationship]"
                            [ngModel]="person.movedFromProvinceOrCountry"
                            (ngModelChange)="provinceUpdate($event)"
                            [provinceList]=provinceData()
                            placeholder="{{ isCanada(person.movedFromProvinceOrCountry)? 'Select a Province': 'Select a State' }}"
                            [useDropDownList]="isCanada(person.movedFromProvinceOrCountry)"></common-province>
            </div>
            <br><br><br>
            <div class="row">
                <div class="col-lg-4" role="dialog" [attr.aria-label]="statusLabel()">
                    <div class="row">
                        <div class="col-lg-12">
                            <h3>{{statusLabel()}}</h3>
                        </div>
                    </div>
                    <div class="form-check" *ngFor="let st of statusInCanada">
                        <input class='form-check-input' type="radio" name="StatusInCanada-{{id}}" id="st{{st}}-{{id}}"
                                (click)="setStatus(st, person)"
                                [checked]="st === person.status" tabindex="0">
                        <label class='form-check-label' for="st{{st}}-{{id}}">
                            {{langStatus('./en/index.js')[st]}}
                        </label>
        
                        <div *ngIf="st === person.status" role="alertdialog" aria-labelledby="What is your activity?">
                            <div class="form-check" *ngFor="let activity of activities">
                                <input class='form-check-input' type="radio" name="activity-{{id}}" id="a{{activity}}-{{id}}"
                                        (click)="setActivity(activity)"
                                        [checked]="activity === person.currentActivity">
                                <label class='form-check-label shade' for="a{{activity}}-{{id}}">
                                    {{langActivities('./en/index.js')[activity]}}
                                </label>
                            </div>
                        </div>
                    </div>
                </div> -->
        
        
                <!--  <div class="col-lg-4" *ngIf="person.status != null && person.currentActivity != null" role="alert" aria-live="assertive">
                    <h3><i class="fa fa-id-card-o" aria-hidden="true"></i> {{lang('./en/index.js').documentInstructionLabel[this.person.relationship]}}</h3>
                    <p [innerHtml]="lang('./en/index.js').documentInstructionsIntro"></p>
                    <ul>
                        <li *ngFor="let document of documents">
                            {{langDocuments('./en/index.js')[document]}}
                            <a role="button" aria-haspopup="true" href="javascript:void(0)" (click)="viewIdReqModal(document)" tabindex="0"
                                [innerHtml]="lang('./en/index.js').viewSamplesButton"></a>
                        </li>
                    </ul>
                    <p [innerHtml]="lang('./en/index.js').documentInstructionsMarriage"></p>
                    <ul>
                        <li *ngFor="let document of nameChangeDocuments">
                            {{langDocuments('./en/index.js')[document]}}
                            <a role="button" aria-haspopup="true" href="javascript:void(0)" (click)="viewIdReqModal(document)" tabindex="0"
                                [innerHtml]="lang('./en/index.js').viewSamplesButton"></a>
                        </li>
                    </ul>
                    <msp-id-req-modal #idReqModal></msp-id-req-modal>
                </div>-->
        
                <h3>Documents</h3>
                <hr>
                <div class="container">
                    <div class="row">
                        <common-dropdown label="Your Status" [placeholder]="'Choose'" [items]="docType" [required]="true"></common-dropdown>                &nbsp;&nbsp;&nbsp;    
                        <common-button  [label]="'Add Document'" 
                            [buttonType]="'btn btn-primary'" >
                        </common-button>
                    </div>   
                </div> <br>
                <div class="col-lg-4" *ngIf="person.status != null && person.currentActivity != null">
                    <common-file-uploader #fileUploader
                        [images]="person.documents.images" [id]='id'>
                        <span id="uploadInstruction" #uploadInstruction tabindex="0">Please upload required ID documents</span>
                    </common-file-uploader>
                    <msp-image-error-modal #imageErrorModal></msp-image-error-modal>
                </div>
            
        <div *ngIf="hasValidCurrentActivity">
        
            <div *ngIf="person.documents.images.length > 0">
                <h3 [innerHtml]="lang('./en/index.js').applicationPersonalInfo[person.relationship]"></h3>
                <p class="help-block" [innerHtml]="lang('./en/index.js').nameHelpBlock[this.person.relationship]"></p>
                
                <msp-full-name [data]="person" (dataChange)="onChange.emit($event)" ></msp-full-name>

                <div class="row">
                    <div class="col-md-4">
                            
                        <common-radio [value]="person.gender" 
                                        label='Gender' 
                                        [radioLabels]='[{"label": "Male", "value": "M"},{ "label": "Female", "value": "F"}]' 
                                        (statusChange)="setGenderVal($event)"
                                        [showError]="showError">
                        </common-radio>   
               
                    </div>
                    <div class="col-md-4">
                        <msp-birthdate
                            #birthDate
                            [person]="person" 
                            (onChange) = "onChange.emit($event)"
                            [showError] = "showError">
                        </msp-birthdate>
                    </div>
                </div>
                <div class="row" 
                    *ngIf="person.status === StatusInCanada.CitizenAdult &&
                    person.currentActivity === Activities.LivingInBCWithoutMSP" style="margin-bottom: 5px">
                    <div class="col-md-12">
                        <div class="form-group"
                        [ngClass]="{'msp-has-error': showError && (person.livedInBCSinceBirth !== true && person.livedInBCSinceBirth !== false)}"
                            role="dialog" [attr.aria-labelledby]="'livedInBCSinceBirth' + objectId">
                            <label [attr.id]="'livedInBCSinceBirth' + objectId" [innerHtml]="lang('./en/index.js').livedInBCSinceBirth[this.person.relationship]"></label>
                            <div class="btn-group" role="group">
                                <button *ngFor='let answer of [{"value": true, "label": "Yes"}, {"value": false, "label": "No"}]'
                                        [class.msp-btn-radio]="person.livedInBCSinceBirth === answer.value"
                                        (click)="setLivedInBCSinceBirth(answer.value)"
                                        type="button" class="btn btn-default">{{answer.label}}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="row" *ngIf="person.documents.images.length > 0">
                    <div class="col-lg-4" *ngIf="person.currentActivity == Activities.MovingFromCountry || person.status == StatusInCanada.TemporaryResident">
                        <common-country name="msp_country_2"
                            [label]="movedFromCountryLabel"
                            [ngModel]="person.movedFromProvinceOrCountry" 
                            (ngModelChange)="person.movedFromProvinceOrCountry = $event; onChange.emit($event)">
                        </common-country>
                    </div>
                    <div class="col-lg-4" *ngIf="person.currentActivity === Activities.MovingFromProvince">
                        <common-province #province name="msp-province"
                                        [label]="movedFromProvinceLabel[this.person.relationship]"
                                    [ngModel]="person.movedFromProvinceOrCountry"
                                    (ngModelChange)="provinceUpdate($event)"
                                    [provinceList]=provinceData(true)
                                    [useDropDownList]="isCanada(person.movedFromProvinceOrCountry)"
                                    colSize="col-md-4"></common-province>
                    </div>
                
                    <div class="col-lg-4" style="margin-top: 15px;" role="dialog" [attr.aria-labelledby]="'movedPermLabel' + objectId">
                    <div class="form-group" [ngClass]="{'has-error': showError && (person.madePermanentMoveToBC === undefined || person.madePermanentMoveToBC === null)}">
                        <div class="control-label">
                            
                        <common-radio [value]="person.madePermanentMoveToBC"  [label]="lang('./en/index.js').haveYouMovedToBCPermanently[this.person.relationship]" 
                            [radioLabels]='[{ "label": "No", "value": false}, {"label": "Yes", "value": true}]'
                            (statusChange)="setMovedToBCPermanently($event)">
                        </common-radio>
        
                        </div>
                        <!--
                        <label [attr.id]="'movedPermLabel'" [innerHtml]="lang('./en/index.js').haveYouMovedToBCPermanently[this.person.relationship]" class="control-label"></label>
                        <div class="btn-group" role="group">
                            <button *ngFor='let answer of [{"value": true, "label": "Yes"}, {"value": false, "label": "No"}]' [class.msp-btn-radio]="person.madePermanentMoveToBC === answer.value"
                            (click)="setMovedToBCPermanently(answer.value)" type="button" class="btn btn-default">{{answer.label}}
                            </button>
                        </div>
                        <div *ngIf='showError && (person.madePermanentMoveToBC === undefined || person.madePermanentMoveToBC === null)'>
                            <div class="text-danger" [innerHtml]="lang('./en/index.js').mustAnswerQuestionAboutPermMoveToBC"></div>
                        </div> -->
        
                    </div>
        
                    </div>
        
                </div>
                <h3 class="intro text-danger" *ngIf="!checkEligibility()" class="text-danger" [innerHtml]="lang('./en/index.js').notEligibleError" role="alert" aria-live="assertive"></h3>
        
                <div class="row" *ngIf="!(person.status === StatusInCanada.CitizenAdult &&
                        person.currentActivity === Activities.LivingInBCWithoutMSP &&
                        person.livedInBCSinceBirth === true)">
                    <div class="col-lg-4">
                        <msp-arrival-date #arrivalDateBC
                                            [arrivalLabel]="arrivalDateLabel"
                                            [year]="person.arrivalToBCYear"
                                            (yearChange)="person.arrivalToBCYear = $event"
                                            [month]="person.arrivalToBCMonth"
                                            (monthChange)="person.arrivalToBCMonth = $event"
                                            [day]="person.arrivalToBCDay"
                                            (dayChange)="person.arrivalToBCDay = $event"
                                            (onChange) = "onChange.emit($event)"
                                            [showError]="showError"
                                            [required] = "true">
                        </msp-arrival-date>
                        <div *ngIf='person.isArrivalToBcBeforeDob'>
                            <div class="text-danger"[innerHtml]="lang('./en/index.js').moveDateBeforeBirthError[person.relationship]"></div>
                        </div>
                    </div>
                    <div class="col-lg-4" *ngIf="person.status === StatusInCanada.CitizenAdult &&
                        person.currentActivity === Activities.LivingInBCWithoutMSP &&
                        !person.livedInBCSinceBirth">
                        <common-province name="msp_province_2"
                                        label="Which province did you move from?"
                                        [ngModel]="person.movedFromProvinceOrCountry"
                                        (ngModelChange)="provinceUpdate($event)"
                                        [provinceList]=provinceData(true)
                                        [useDropDownList]="isCanada(person.movedFromProvinceOrCountry)">
                        </common-province>
                    </div>
                    <div class="col-lg-4">
                        <!--For canadian citizen, returning to BC after an absence or moving from another province, the arrival date in canada
                        is not required.-->
                        <msp-arrival-date #arrivalDateCanada
                                            [arrivalLabel]="'Arrival date in Canada'"
                                            [required]="!(person.status === StatusInCanada.CitizenAdult
                                            && (person.currentActivity == Activities.LivingInBCWithoutMSP || person.currentActivity == Activities.MovingFromProvince))"
                                            [year]="person.arrivalToCanadaYear"
                                            (yearChange)="person.arrivalToCanadaYear = $event"
                                            [month]="person.arrivalToCanadaMonth"
                                            (monthChange)="person.arrivalToCanadaMonth = $event"
                                            [day]="person.arrivalToCanadaDay"
                                            (dayChange)="person.arrivalToCanadaDay = $event"
                                            (onChange) = "onChange.emit($event)"
                                            [showError]="showError">
                        </msp-arrival-date>
                        <div *ngIf='person.isArrivalToCanadaBeforeDob'>
                            <div class="text-danger"[innerHtml]="lang('./en/index.js').moveDateCanadaBeforeBirthError[person.relationship]"></div>
                        </div>
        
                    </div>
        
                </div>
                <div class="row" *ngIf="person.currentActivity === Activities.MovingFromProvince">
                    <div class="col-md-4" >
                        <msp-health-number #healthNumber
                                            [healthNumber]="person.healthNumberFromOtherProvince"
                                            (healthNumberChange)="handleHealthNumberChange($event)"
                                            [required]="false"
                                            [showError]="showError"
                                            >
                        </msp-health-number>
                    </div>
                </div>
                <div style="margin-bottom: 20px">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group"
                                    [ngClass]="{'has-error': showError && (person.declarationForOutsideOver30Days === undefined || person.declarationForOutsideOver30Days === null)}"
                                    role="dialog" [attr.aria-labelledby]="'outsideBCLabel' + objectId">
                                
                                <common-radio [value]="person.declarationForOutsideOver30Days"  [label]="lang('./en/index.js').beenOutsideBCForMoreThan30DaysInTotalInThePast12Months" 
                                    [radioLabels]='[{ "label": "No", "value": false}, {"label": "Yes", "value": true}]'
                                    (statusChange)="setBeenOutsideForOver30Days($event)">
                                </common-radio>
        
                            </div>
                        </div>
                    </div>
                    <div *ngIf="person.declarationForOutsideOver30Days === true" class="row" style="margin-bottom: 20px">
                        <div class="col-md-12">
                            <msp-outof-bc-record #outOfBCRecord [minMonthsRange]="12"  [minMonthsRangeErrorMsg]="lang('./en/index.js').minMonths"
                                                    [outofBCRecord]="person.outOfBCRecord"
                                                    (onDelete)="handleDeleteOutofBCRecord($event)"
                                                    (onUpdate)="handleOutofBCRecordChange($event)"
                                                    [showError]="showError"
                                                    >
                            </msp-outof-bc-record>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-bottom: 20px">
                    <div class="col-lg-6">
                        <div class="form-group"
                            [ngClass]="{'has-error': (person.hasPreviousBCPhn === undefined || person.hasPreviousBCPhn === null) && showError}"
                            role="dialog" [attr.aria-labelledby]="'previousBCHealthNumber' + objectId">
                        
        
                        <common-radio [value]="person.hasPreviousBCPhn"  [label]="lang('./en/index.js').previousBCHealthNumber[this.person.relationship]" 
                            [radioLabels]='[{ "label": "No", "value": false}, {"label": "Yes", "value": true}]'
                            (statusChange)="setHasPreviousPhn($event)">
                        </common-radio>
        
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-6" *ngIf="person.hasPreviousBCPhn === true">
                        <common-phn #phn name="previous_phn"
                            [(ngModel)]="person.previous_phn"
                            [label]="lang('./en/index.js').phnLabel[this.person.relationship]"
                            (ngModelChange) = "onChange.emit($event)"> </common-phn>
                        <!-- <common-phn #phn [label]="lang('./en/index.js').phnLabel[this.person.relationship]" 
                            [(value)]="person.previous_phn" 
                        ></common-phn>  
                            <msp-phn #phn
                                    [phn]="person.previous_phn"
                                    (phnChange)="person.previous_phn = $event"
                                    [required]="false"
                                    [bcPhn]="true"
                                    [phnLabel]="lang('./en/index.js').phnLabel[this.person.relationship]"
                                    (onChange) = "onChange.emit($event)"
                                    [showError] = "showError"></msp-phn> -->
                    </div>
                </div>
        
            </div>
        
            <div #armedForcedQuestion class="row"
                *ngIf="person.documents.images.length > 0 && person.status === StatusInCanada.CitizenAdult" 
                style="margin-top: 10px; margin-bottom: 10px;"
                    role="dialog" [attr.aria-labelledby]="'canadianForcesQuestionLabel' + objectId">
                <div class="col-lg-8">
                    <div class="form-group"
                        [ngClass]="{'has-error': (person.institutionWorkHistory === undefined ||  person.institutionWorkHistory === null) 
                        && showError}">
                        <common-radio [value]="person.institutionWorkHistory"  [label]="lang('./en/index.js').canadianForcesQuestion[this.person.relationship]" 
                            [radioLabels]='[{ "label": "No", "value": "No"}, {"label": "Yes", "value": "Yes"}]'
                                (statusChange)="selectInstitution($event)">
                        </common-radio>
                    </div>
                    <div *ngIf="person.institutionWorkHistory === 'Yes'" style="margin-top: 10px">
                        <msp-discharge-date
                                #dischargeDate
                                [year]="person.dischargeYear"
                                (yearChange)="person.dischargeYear = $event"
                                [month]="person.dischargeMonth"
                                (monthChange)="person.dischargeMonth = $event"
                                [day]="person.dischargeDay"
                                (dayChange)="person.dischargeDay = $event"
                                (onChange) = "onChange.emit($event)" [showError]="showError"
                                ></msp-discharge-date>
                    </div>
                </div>
            </div>
        
            <div #schoolQuestion class="row" *ngIf="person.documents.images.length > 0 &&
                                    (person.relationship === Relationship.Applicant ||
                                    person.relationship === Relationship.Child19To24)">
                <div class="form-group col-lg-4" *ngIf="person.relationship === Relationship.Applicant"
                    [ngClass]="{'has-error': showError && (person.fullTimeStudent === undefined || person.fullTimeStudent === null)}"
                    role="dialog" [attr.aria-labelledby]="'fullTimeStudentLabel' + objectId">
                    
                    <common-radio [value]="person.fullTimeStudent"  [label]="lang('./en/index.js').fullTimeStudentLabel" 
                            [radioLabels]='[{ "label": "No", "value": false}, {"label": "Yes", "value": true}]'
                                (statusChange)="setFullTimeStudent($event)">
                    </common-radio>
        
                            <!--  <common-button-group  [label]="lang('./en/index.js').fullTimeStudentLabel" 
                                    [data]="person.fullTimeStudent " 
                                    (dataChange)="setFullTimeStudent($event)" >
                    </common-button-group> 
        
                    <label id="fullTimeStudentLabel{{objectId}}" [innerHtml]="lang('./en/index.js').fullTimeStudentLabel" class="control-label"></label>
                    <div class="btn-group" role="group">
                        <button *ngFor='let answer of [{"value": true, "label": "Yes"}, {"value": false, "label": "No"}]'
                                [class.msp-btn-radio]="person.fullTimeStudent === answer.value"
                                (click)="setFullTimeStudent(answer.value)"
                                type="button" class="btn btn-default">{{answer.label}}
                        </button>
                        
                    </div>
                    <div *ngIf='showError && (person.fullTimeStudent === undefined || person.fullTimeStudent === null)'
                            role="alert" aria-live="assertive">
                        <div class="text-danger" 
                            [innerHtml]="lang('./en/index.js').mustDeclareStudentStatus"></div>
                    </div> -->
                </div>
        
            </div>
            
        
            <div class="row" *ngIf="person.documents.images.length > 0 &&
                                    person.relationship === Relationship.Child19To24">
                <div class="form-group col-lg-6"
                    [ngClass]="{'has-error': !formRef.controls.schoolName?.valid && (schoolNameRef.touched || showError)}">
                    <h2 [innerHtml]="lang('./en/index.js').nameOfSchool"></h2>
                    <label [innerHtml]="lang('./en/index.js').fullAttendanceLabel"></label>
                    <label class="visuallyhidden" for="schoolName{{objectId}}">{{lang('./en/index.js').nameOfSchool}} {{lang('./en/index.js').fullAttendanceLabel}}></label>
                    <input [(ngModel)]='person.schoolName' type="text" class="form-control"
                        id="schoolName{{objectId}}" name="schoolName" #schoolNameRef="ngModel"
                        required
                        maxlength="50">
                    <div *ngIf='schoolNameRef.touched || showError' role="alert" aria-live="assertive">
                        <div class="text-danger" *ngIf="schoolNameRef.errors?.required"
                            [innerHtml]="lang('./en/index.js').schoolNameErrorIsRequired"></div>
                    </div>
                </div>
            </div>
            <msp-address #schoolAddress
                        *ngIf="person.documents.images.length > 0 &&
                            person.relationship === Relationship.Child19To24"
                        [mailingAddressHeading]="lang('./en/index.js').schoolAddressLabel"
                        [mailingAddress]="person.schoolAddress"
                        [mailingOnly]="true"
                        (onChange)="schoolAddressUpdate($event)"
                        [showError] = "showError"
                        ></msp-address>
        
            <div class="row" *ngIf="person.documents.images.length > 0 &&
                                    person.relationship === Relationship.Child19To24">
                <div class="form-group col-lg-6">
                    
                    <common-date  #schoolDate [label]="lang('./en/index.js').schoolDepartureDateLabel" [restrictDate]="'past'"
                        [(date)]="person.studiesDepartureYear" (dateChange)= "updateSchoolDepartureDate($event)"></common-date>
                    
                    <!--<msp-school-date #schoolDate
                                    [departureDate]="true"
                                    [year]="person.studiesDepartureYear"
                                    [required]="schoolInBC"
                                    (yearChange)="person.studiesDepartureYear = $event"
                                    [month]="person.studiesDepartureMonth"
                                    (monthChange)="person.studiesDepartureMonth = $event"
                                    [day]="person.studiesDepartureDay"
                                    (dayChange)="person.studiesDepartureDay = $event"
                                    (onChange) = "updateSchoolDepartureDate($event)"
                                    [showError] = "showError"
                                    >
                    </msp-school-date> -->
                </div>
                <div class="form-group col-lg-4">
                    <common-date  #schoolDate [label]="lang('./en/index.js').schoolCompletionDateLabel" [restrictDate]="'past'"
                        [(date)]="person.studiesFinishedDay" (dateChange)= "updateSchoolExpectedCompletionDate($event)"></common-date>
                    
                    <!--<msp-school-date [year]="person.studiesFinishedYear"
                                    (yearChange)="person.studiesFinishedYear = $event"
                                    [month]="person.studiesFinishedMonth"
                                    (monthChange)="person.studiesFinishedMonth = $event"
                                    [day]="person.studiesFinishedDay"
                                    (dayChange)="person.studiesFinishedDay = $event"
                                    (onChange) = "updateSchoolExpectedCompletionDate($event)"
                                    [showError] = "showError"
                                    >
                    </msp-school-date> -->
                </div>
                
            </div>
            <div class="row" *ngIf="person.documents.images.length > 0">
                <div #inBCAfterStudiesQuestion *ngIf="person.fullTimeStudent" class="col-lg-6"
                    role="dialog" [attr.aria-labelledby]="'inBCAfterStudiesLabel' + objectId">
                    <div class="form-group"
                        [ngClass]="{'has-error': (person.inBCafterStudies===undefined || person.inBCafterStudies===null) && showError}">
                    <!-- <label id="inBCAfterStudiesLabel{{objectId}}" *ngIf="person.relationship === Relationship.Applicant"
                        [innerHtml]="lang('./en/index.js').inBCAfterStudiesLabel" class="control-label"></label> -->
                    
                    <common-radio [value]="person.inBCafterStudies"  [label]="lang('./en/index.js').inBCAfterStudiesLabel" 
                        [radioLabels]='[{ "label": "No", "value": false}, {"label": "Yes", "value": true}]'
                            (statusChange)="setStayInBCAfterStudy($event)">
                    </common-radio>
        
                        <!-- <common-button-group 
                            [label]="lang('./en/index.js').inBCAfterStudiesLabel" 
                            [data]="person.inBCafterStudies " (dataChange)="setStayInBCAfterStudy($event)" >
                        </common-button-group>-->
        
        
                            <label id="inBCAfterStudiesLabel{{objectId}}" *ngIf="person.relationship === Relationship.Child19To24" class="control-label"
                        [innerHtml]="lang('./en/index.js').childStayInBCAfterStudiesLabel"></label>
                    <!--   <div class="btn-group" role="group">
                        <button *ngFor='let answer of [{"value": true, "label": "Yes"}, {"value": false, "label": "No"}]'
                                [class.msp-btn-radio]="person.inBCafterStudies === answer.value"
                                (click)="setStayInBCAfterStudy(answer.value)"
                                type="button" class="btn btn-default">{{answer.label}}
                        </button>
                    </div> -->
                    <div *ngIf="(person.inBCafterStudies===undefined || person.inBCafterStudies===null) && showError"
                            role="alert" aria-live="assertive">
                        <p class="text-danger" 
                            [innerHtml]="lang('./en/index.js').mustAnswerQuestion"></p>
                    </div>   
        
                    </div>
                </div>
            </div>
        
        </div>
    <!-- </form> -->



<!-- switch *ngIf value to true for debugging-->
<div class="row" *ngIf='false'>
    <div class="col-lg-12">
        <ul>
            <li *ngFor='let log of changeLog'>
                {{log | json}}
            </li>
        </ul>
    </div>

    <div class="col-lg-12">
        <p>Person Data Model</p>
        {{this.person| json}}
        <p>firstname</p>
        <!--{{ formRef.controls.firstname | json}}-->
    </div>
</div>
